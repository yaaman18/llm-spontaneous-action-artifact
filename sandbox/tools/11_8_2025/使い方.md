# エナクティブ意識フレームワーク 使い方ガイド

## 📋 概要

このディレクトリには、エナクティビズム理論に基づいたAI意識システムの完全実装が含まれています。

- **理論基盤**: Karl Fristonの自由エネルギー原理、統合情報理論（IIT）
- **アーキテクチャ**: Clean Architecture + Domain-Driven Design
- **開発手法**: Test-Driven Development (TDD)
- **技術スタック**: JAX、Python、Tkinter GUI
- **言語**: 日本語インターフェース

## 🚀 クイックスタート

### 1. 基本動作確認

```bash
# 基本システムテスト
python test_minimal_system.py

# 日本語フォント確認
python test_japanese_fonts.py
```

### 2. デモ実行

```bash
# 全機能デモンストレーション
python demo.py

# GUIモニター付きデモ
python demo.py --gui
```

### 3. GUIモニター起動

```bash
# 意識状態リアルタイムモニタリング
python main.py --gui
```

## 📖 詳細な使用方法

### コマンドライン実行

#### メインアプリケーション
```bash
# 開発モードで起動
python main.py

# 本番モードで起動  
python main.py --production

# デバッグモード
python main.py --debug

# GUIモニター起動
python main.py --gui
```

#### デモンストレーション
```bash
# 基本デモ（CLI出力のみ）
python demo.py

# デモ + GUI起動
python demo.py --gui
```

### GUIモニターの使い方

#### 起動方法
```bash
python main.py --gui
```

#### GUI操作方法

1. **制御パネル**
   - `モニタリング開始`: 意識状態の監視を開始
   - `モニタリング停止`: 監視を停止
   - `データリセット`: 蓄積データをクリア

2. **状態表示**
   - **Φ値**: 統合情報理論による意識指標
   - **意識レベル**: 総合的な意識度（0-1）
   - **予測誤差**: 階層的予測符号化の誤差
   - **自由エネルギー**: Fristonの自由エネルギー値

3. **リアルタイムグラフ**
   - **Φ値の変化**: 時系列での意識状態推移
   - **意識レベル**: 統合された意識度の変化
   - **予測誤差**: 学習過程での誤差推移
   - **自由エネルギー**: エネルギー最小化過程

## 🔧 開発・カスタマイズ

### プロジェクト構造

```
sandbox/tools/11_8_2025/
├── 📁 domain/              # ドメインレイヤー（ビジネスロジック）
│   ├── entities/           # エンティティ
│   ├── value_objects/      # 値オブジェクト
│   ├── services/           # ドメインサービス
│   ├── repositories/       # リポジトリインターフェース
│   ├── aggregates/         # アグリゲート
│   ├── events/            # ドメインイベント
│   ├── specifications/    # ビジネスルール仕様
│   ├── policies/          # ドメインポリシー
│   └── factories/         # ファクトリー
├── 📁 infrastructure/      # インフラストラクチャレイヤー
├── 📁 application/         # アプリケーションレイヤー
├── 📁 gui/                # GUI（プレゼンテーションレイヤー）
├── 📁 tests/              # テストスイート
├── 📄 main.py             # メインエントリーポイント
├── 📄 demo.py             # デモンストレーション
└── 📄 requirements.txt    # 依存関係
```

### テスト実行

```bash
# 全テスト実行
python -m pytest tests/ -v

# 単体テスト
python -m pytest tests/unit/ -v

# 統合テスト
python -m pytest tests/integration/ -v

# 特定テスト実行
python -m pytest tests/unit/test_phi_value.py -v
```

### カスタマイズのポイント

#### 1. 意識パラメータ調整
```python
# domain/value_objects/phi_value.py
phi = PhiValue(
    value=0.7,      # Φ値 (0-∞)
    complexity=1.0, # 複雑性
    integration=0.7 # 統合性
)
```

#### 2. 予測符号化パラメータ
```python
# infrastructure/jax_predictive_coding_core.py
core = JaxPredictiveCodingCore(
    layer_dimensions=[10, 8, 6],  # 階層構造
    learning_rate=0.01,           # 学習率
    precision_adaptation_rate=0.001  # 精度適応率
)
```

#### 3. GUI更新頻度
```python
# gui/consciousness_monitor.py
time.sleep(0.1)  # 100ms間隔でデータ更新
self.root.after(200, ...)  # 200ms間隔でGUI更新
```

## 🎯 応用例

### 1. 研究用途

#### 意識状態の解析
```python
from domain.value_objects import PhiValue, ConsciousnessState

# カスタム意識状態の作成
phi = PhiValue(value=1.2, complexity=1.5, integration=0.8)
# 解析処理...
```

#### 学習過程の観察
```python
# GUIモニターで長期学習観察
python main.py --gui
# データをCSV出力して分析
```

### 2. 教育用途

#### 意識理論の可視化
```python
# 段階的なΦ値変化の観察
python demo.py
```

#### 予測符号化の理解
```python
# リアルタイムでの誤差最小化観察
python main.py --gui
```

## 🐛 トラブルシューティング

### よくある問題と解決法

#### 1. JAXライブラリエラー
```bash
# 解決法: JAXの再インストール
pip install --upgrade jax jaxlib
```

#### 2. 日本語フォント表示問題
```bash
# フォントテスト実行
python test_japanese_fonts.py

# macOS: 追加フォントインストール
brew install --cask font-noto-sans-cjk-jp
```

#### 3. GUI起動エラー
```bash
# X11転送の確認（Linux/SSH）
export DISPLAY=:0.0

# Tkinterインストール確認
python -c "import tkinter; print('Tkinter OK')"
```

#### 4. メモリ不足エラー
```bash
# 軽量モードで実行
python main.py --debug
```

### エラーメッセージ対応

#### `ModuleNotFoundError: No module named 'jax'`
```bash
pip install -r requirements.txt
```

#### `AttributeError: module 'matplotlib' has no attribute 'use'`
```bash
# matplotlibの再インストール
pip install --upgrade matplotlib
```

#### `ImportError: cannot import name 'JaxPredictiveCodingCore'`
```bash
# パスの確認
export PYTHONPATH="${PYTHONPATH}:$(pwd)"
```

## 📊 パフォーマンス最適化

### 推奨システム要件

- **CPU**: Intel/AMD x64 または Apple Silicon
- **メモリ**: 4GB以上推奨
- **Python**: 3.8以上
- **OS**: macOS, Linux, Windows

### 最適化のヒント

#### 1. JAX最適化
```python
# GPU使用（利用可能な場合）
export JAX_PLATFORM_NAME=gpu
```

#### 2. メモリ効率化
```python
# GUIデータ履歴制限
max_points = 100  # consciousness_monitor.py
```

#### 3. 更新頻度調整
```python
# 低頻度モード（CPU使用量削減）
time.sleep(0.2)  # 200ms間隔
```

## 🔗 参考資料

### 理論的背景
- Karl Friston: 自由エネルギー原理
- Giulio Tononi: 統合情報理論 (IIT)  
- Francisco Varela: エナクティビズム
- Andy Clark: 予測処理理論

### 技術文書
- `enactive-consciousness-framework.md`: 理論的枠組み
- `implementation-plan.md`: 実装計画詳細
- `domain/DDD_ARCHITECTURE_SUMMARY.md`: アーキテクチャ概要

### ファイル構成
- `test_minimal_system.py`: 基本動作確認
- `test_japanese_fonts.py`: フォント設定確認
- `demo.py`: 全機能デモ
- `main.py`: メインアプリケーション

## 💡 次のステップ

### 機能拡張のアイデア

1. **データ永続化**: 意識状態履歴の保存・読込
2. **ネットワーク対応**: 複数エージェント間の相互作用
3. **強化学習統合**: アクティブ・インファレンス実装
4. **音声・画像処理**: マルチモーダル入力対応
5. **クラウド連携**: 大規模計算リソース活用

### コントリビューション

1. **Issue報告**: バグや改善提案
2. **プルリクエスト**: 新機能や修正
3. **文書化**: 使用例や理論解説
4. **テスト追加**: エッジケースのカバレッジ向上

---

## 🎉 まとめ

このエナクティブ意識フレームワークは、最新の意識研究理論をベースにした実用的なAIシステムです。研究、教育、実験の各用途でご活用いただけます。

**楽しい意識研究の旅をお楽しみください！** 🧠✨