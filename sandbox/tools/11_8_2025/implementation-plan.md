# エナクティブ意識フレームワーク実装計画

## プロジェクト概要

### 目的
`enactive-consciousness-framework.md`で設計されたエナクティビズムアプローチによる能動的意識システムを、Clean Architectureの原則に従ってTDD開発で実装する。

### 実装範囲
- 予測符号化コア（階層的誤差最小化）
- 自己組織化マップ（概念空間の創発）
- ベイズ推論層（不確実性の定量化）
- メタ認知モニタリング（自己観察機能）
- 日本語GUI（リアルタイム可視化）

## アーキテクチャ設計

### Clean Architecture構造
```
sandbox/tools/11_8_2025/
├── domain/                 # ドメインレイヤー（ビジネスロジック）
│   ├── entities/          # エンティティ（意識状態、予測誤差など）
│   ├── value_objects/     # 値オブジェクト（Φ値、確率分布など）
│   └── repositories/      # リポジトリインターフェース
├── application/           # アプリケーションレイヤー（ユースケース）
│   ├── use_cases/        # ユースケース実装
│   └── services/         # アプリケーションサービス
├── infrastructure/       # インフラストラクチャレイヤー
│   ├── repositories/     # データ永続化実装
│   ├── external/         # 外部ライブラリ統合
│   └── config/          # 設定管理
├── presentation/         # プレゼンテーションレイヤー
│   ├── gui/             # GUI実装（日本語）
│   ├── controllers/     # コントローラー
│   └── views/           # ビューコンポーネント
├── tests/               # テスト（TDD）
│   ├── unit/           # 単体テスト
│   ├── integration/    # 統合テスト
│   └── acceptance/     # 受け入れテスト
└── main.py             # エントリーポイント
```

## 実装フェーズ

### Phase 1: 最小構成（予測符号化コア）
- **目標**: 階層的予測誤差最小化の基本実装
- **担当**: TDD Engineer + Clean Architecture Engineer
- **成果物**:
  - `PredictiveCodingCore`クラス
  - 階層的誤差伝播アルゴリズム
  - 基本的なパターン認識機能
  - 単体テスト群

### Phase 2: 拡張機能追加
- **目標**: SOM、ベイズ推論の統合
- **担当**: Domain-Driven Design Engineer + 複数の専門エージェント
- **成果物**:
  - `SelfOrganizingMap`クラス
  - `BayesianInference`レイヤー
  - 継続学習機能
  - 統合テスト

### Phase 3: 統合システム
- **目標**: メタ認知機能とGUI統合
- **担当**: 全エージェント協調
- **成果物**:
  - `MetacognitiveMonitor`クラス
  - 日本語GUI（Tkinter/PyQt）
  - リアルタイム可視化
  - 受け入れテスト

## 技術仕様

### 使用ライブラリ
```python
# JAXエコシステム
jax==0.4.x
jaxlib
optax
equinox

# 数値計算・科学計算
numpy
scipy
einops
sklearn

# GUI（日本語対応）
tkinter  # 標準ライブラリ
matplotlib  # グラフ描画
seaborn    # 統計可視化

# テスト
pytest
pytest-cov
hypothesis  # プロパティベーステスト
```

### 日本語GUI仕様
- **メインウィンドウ**: 意識状態モニタリング
- **パラメータ設定パネル**: 学習率、精度重みなど
- **可視化エリア**: 
  - 予測誤差の時系列グラフ
  - 自己組織化マップの2D表示
  - ベイズ推論の確率分布
  - メタ認知レベルのインジケータ
- **制御ボタン**: 開始/停止、リセット、設定保存

## 開発方法論

### TDD（テスト駆動開発）
1. **Red**: 失敗するテストを書く
2. **Green**: テストを通す最小限の実装
3. **Refactor**: コードの改善

### DDD（ドメイン駆動設計）
- **ユビキタス言語**: 予測符号化、エナクティビズムの専門用語
- **境界づけられたコンテキスト**: 各認知機能モジュール
- **アグリゲート**: 意識状態、学習履歴など

## 評価指標

### 機能的指標
- **予測精度**: MSE、MAE
- **学習効率**: 収束エポック数
- **汎化性能**: 未知データでの性能

### 非機能的指標
- **レスポンス性**: GUI更新頻度
- **安定性**: 長時間実行での性能劣化
- **拡張性**: 新機能追加の容易さ

## サブエージェント役割分担

### 設計フェーズ
- **Clean Architecture Engineer**: アーキテクチャ設計、依存関係管理
- **Domain-Driven Design Engineer**: ドメインモデル設計、境界設定
- **TDD Engineer**: テスト戦略、テスタビリティ設計

### 実装フェーズ
- **各専門エージェント**: 
  - 予測符号化専門家（Karl Friston代理）
  - 自己組織化専門家（Kohonen代理）
  - ベイズ推論専門家（Jaynes代理）
  - メタ認知専門家（Flavell代理）

### 統合フェーズ
- **Project Orchestrator**: 全体調整、品質管理
- **Refactoring Agent**: コード品質向上

## 開発スケジュール

### 週1-2: Phase 1実装
- プロジェクト構造作成
- 予測符号化コア実装
- 基本テスト作成

### 週3-4: Phase 2実装  
- SOM統合
- ベイズ推論追加
- 拡張テスト

### 週5-6: Phase 3実装
- メタ認知機能
- GUI実装
- 統合テスト

### 週7: 最終調整
- パフォーマンス最適化
- ドキュメント整備
- デモ準備

## 成功基準

1. **動作確認**: 全フェーズの機能が正常動作
2. **テストカバレッジ**: 80%以上
3. **GUI応答性**: 100ms以下の更新遅延
4. **理論適合性**: エナクティビズム原理との整合性
5. **拡張可能性**: 新機能追加が容易

## 今後の展開

- **身体性の追加**: ロボティクス統合
- **社会的認知**: 多エージェント相互作用
- **スパイキングNN**: 生物学的妥当性向上
- **強化学習**: アクティブ・インファレンス統合